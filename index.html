<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>东坡工坊 - 一位工程师的经世才华</title>
    
    <!-- 1. 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. 引入古风字体 Noto Serif SC (思源宋体) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- 3. 引入 three.js (用于3D模型) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- 3a. 引入 OrbitControls (用于3D模型交互) -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <!-- 4. 引入 Tone.js (用于合成背景音乐) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    
    <!-- 5. 自定义古风与展厅样式 -->
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Noto Serif SC', serif;
            background-color: #fcfaf2; 
            /* 方案四: 氛围纹理 */
            background-image: url('https://www.transparenttextures.com/patterns/rice-paper.png');
            color: #3a2e2e; 
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Noto Serif SC', serif;
            color: #583E2A; 
            font-weight: 600;
        }

        section[id] {
            scroll-margin-top: 80px;
        }

        /* 模拟印章效果 */
        .seal-stamp {
            position: absolute;
            top: 2rem;
            right: 3rem;
            width: 60px;
            height: 60px;
            background-color: #a84343; 
            color: #fcfaf2; 
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border: 3px solid #8f3a3a; 
            border-radius: 4px;
            transform: rotate(8deg); 
            opacity: 0.85;
            z-index: 10;
            display: none; 
        }
        
        @media (min-width: 1024px) {
            .seal-stamp {
                display: flex;
            }
        }

        /* 章节标题装饰 */
        .section-title {
            position: relative;
            display: inline-block;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80%;
            height: 3px;
            background-color: #a84343; 
        }

        /* 卡片/章节样式 */
        .exhibit-card {
            background-color: #ffffff;
            border: 1px solid #e0d8cc; 
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(88, 62, 42, 0.08);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        /* 索引卡片悬浮效果 */
        .exhibit-card:hover {
            box-shadow: 0 8px 20px rgba(88, 62, 42, 0.12);
            transform: translateY(-4px); 
        }

        /* 流程图样式 */
        .flow-chart {
            display: flex;
            flex-wrap: wrap; 
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
            padding: 1rem;
        }
        .flow-box {
            border: 2px solid #8c6a4d; 
            background-color: #f9f6f0;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            min-width: 160px;
        }
        .flow-arrow {
            font-size: 2rem;
            color: #a84343;
            font-weight: bold;
            display: block; 
        }
        @media (min-width: 768px) {
            .flow-arrow {
                display: block; 
            }
            .flow-arrow.md\:block { 
                 display: block !important;
            }
            .flow-arrow.hidden.md\:block {
                display: none; 
            }
            @media (min-width: 768px) {
                .flow-arrow.hidden.md\:block {
                    display: block !important; 
                }
                .flow-arrow.block.md\:hidden {
                    display: none !important; 
                }
            }
        }

        /* --- 动画与交互样式 --- */

        .yangma-img-container {
            position: relative; 
            overflow: hidden;
            transition: all 0.3s ease;
            background-color: #f9f6f0;
        }

        /* 滚动渐入效果 */
        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .reveal-on-scroll.stagger-1 { transition-delay: 0.1s; }
        .reveal-on-scroll.stagger-2 { transition-delay: 0.2s; }
        .reveal-on-scroll.stagger-3 { transition-delay: 0.3s; }
        .reveal-on-scroll.stagger-4 { transition-delay: 0.4s; }
        .reveal-on-scroll.stagger-5 { transition-delay: 0.5s; }
        .reveal-on-scroll.stagger-6 { transition-delay: 0.6s; }
        .reveal-on-scroll.stagger-7 { transition-delay: 0.7s; }

        .sudi-img-container {
            transition: box-shadow 0.4s ease;
            border-radius: 8px;
        }
        .sudi-img-container:hover {
            box-shadow: 0 0 20px 5px rgba(58, 90, 120, 0.25); 
        }

        /* (修改) 方案八: 策展人笔记样式 */
        .curator-note {
            background-color: #f5f2e9; 
            border-left: 4px solid #a84343; 
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1.5rem;
            transition: all 0.3s ease; /* 新增: 过渡效果 */
            cursor: pointer; /* 新增: 手型光标 */
        }
        .curator-note:hover {
            background-color: #f0ece2; /* 新增: 悬停背景色 */
            box-shadow: 0 2px 8px rgba(88, 62, 42, 0.1); /* 新增: 悬停阴影 */
        }
        .curator-note p {
            margin: 0;
            font-size: 0.95em;
            color: #583E2A;
            line-height: 1.6;
        }
        .curator-note .note-title {
            font-weight: bold;
            display: block;
            margin-bottom: 0.5rem;
            color: #583E2A;
        }

        /* 3D 模型浮窗按钮 */
        #open-3d-modal {
            position: absolute;
            bottom: 1.5rem; 
            right: 1.5rem;  
            background-color: rgba(88, 62, 42, 0.9); 
            color: #fcfaf2;
            padding: 0.75rem; 
            border-radius: 6px;
            border: 1px solid rgba(252, 250, 242, 0.5);
            cursor: pointer;
            transition: opacity 0.3s ease, transform 0.3s ease, background-color 0.2s ease;
            backdrop-filter: blur(2px);
            z-index: 5;
            opacity: 0;
            transform: scale(0.9);
        }
        .yangma-img-container:hover #open-3d-modal {
            opacity: 1;
            transform: scale(1);
        }
        #open-3d-modal:hover {
            background-color: rgba(168, 67, 67, 0.9); 
            transform: scale(1.1); 
        }

        /* 3D 模型浮窗关闭按钮 */
        #close-3d-modal {
            font-size: 2rem;
            line-height: 1;
            font-weight: 200;
            transition: color 0.2s ease;
        }
        #close-3d-modal:hover {
            color: #a84343;
        }

        /* 方案二: 石炭内容展开样式 */
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .collapsible-content.expanded {
            max-height: 100vh; 
            margin-top: 1.5rem; 
        }
        #shitan-toggle {
            transition: color 0.2s ease;
        }
        #shitan-toggle:hover {
            color: #8f3a3a; 
        }

        /* 方案七: 时间轴样式 */
        .timeline-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 1.5rem; /* 为圆点留出空间 */
        }
        .timeline-line {
            position: absolute;
            top: 1.5rem; /* 与圆点中心对齐 */
            left: 5%; /* 线不顶到头 */
            width: 90%;
            height: 3px;
            background-color: #e0d8cc; /* 匹配边框色 */
            transform: translateY(-50%);
            z-index: -1;
        }
        .timeline-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative; 
            text-align: center;
            width: 18%; /* 5个点，留出间距 */
        }
        .timeline-dot {
            width: 16px;
            height: 16px;
            background-color: #fcfaf2; /* 页面背景色 */
            border: 3px solid #c9bbae; /* 线的点缀色 */
            border-radius: 50%;
            z-index: 1;
            margin-bottom: 0.75rem; /* 点和文字的间距 */
        }
        .timeline-dot.highlight {
            background-color: #a84343; /* 展品高亮色 */
            border-color: #8f3a3a;
        }
        .timeline-content {
            font-size: 0.875rem;
            color: #583E2A;
            line-height: 1.4;
        }
        .timeline-content h4 {
            font-size: 1rem;
        }

        /* 方案八: 铭牌弹窗样式 */
        #close-note-modal {
            font-size: 2rem;
            line-height: 1;
            font-weight: 200;
            transition: color 0.2s ease;
        }
        #close-note-modal:hover {
            color: #a84343;
        }
        /* 弹窗内的排版 */
        #note-modal-body p {
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            text-align: left; /* 笔记内容左对齐更易读 */
        }
        #note-modal-body .note-title {
            color: #583E2A;
            font-weight: bold;
            margin-bottom: 1rem;
            text-align: left;
        }

        /* (新增) 方案二: 秧马交互热点样式 */
        .hotspot {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: rgba(168, 67, 67, 0.8); /* 匹配印章的红色 */
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 10px rgba(168, 67, 67, 0.7);
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
        }
        .hotspot::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            background-color: transparent;
            border: 2px solid rgba(168, 67, 67, 0.8);
            /* 脉冲动画 */
            animation: hotspot-pulse 1.5s infinite ease-out;
        }
        .hotspot:hover {
            transform: scale(1.2);
        }
        .hotspot-label {
            position: absolute;
            left: 130%; /* 标签在热点右侧 */
            top: 50%;
            transform: translateY(-50%);
            white-space: nowrap;
            background-color: rgba(88, 62, 42, 0.9); /* 匹配标题的棕色 */
            color: #fcfaf2;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.875rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none; /* 标签不S_INTERRUPT点击 */
            z-index: 11;
        }
        .hotspot:hover .hotspot-label {
            opacity: 1;
        }

        @keyframes hotspot-pulse {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

    </style>
</head>
<body class="antialiased leading-relaxed">

    <!-- 固定导航栏 -->
    <nav class="sticky top-0 z-40 w-full px-4 sm:px-6 lg:px-8 py-3 bg-white/80 backdrop-blur-md shadow-sm" style="background-color: rgba(252, 250, 242, 0.85);">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <a href="#" class="text-xl font-bold" style="color: #583E2A;">东坡工坊</a>
            <div class="hidden md:flex space-x-6">
                <a href="#yangma" class="text-gray-700 hover:text-black transition-colors" style="color: #583E2A;">巧具·秧马</a>
                <a href="#shitan" class="text-gray-700 hover:text-black transition-colors" style="color: #583E2A;">灼见·石炭</a>
                <a href="#sudi" class="text-gray-700 hover:text-black transition-colors" style="color: #583E2A;">宏图·苏堤</a>
            </div>
            <button id="music-toggle" title="播放/暂停背景音乐" class="p-2 rounded-full hover:bg-gray-200 transition-colors" style="color: #583E2A;">
                <svg id="icon-muted" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .89-1.077 1.337-1.707.707L5.586 15zM17 14l-4-4m0 4l4-4" />
                </svg>
                <svg id="icon-playing" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .89-1.077 1.337-1.707.707L5.586 15z" />
                </svg>
            </button>
        </div>
    </nav>


    <!-- 页面容器 -->
    <div class="relative max-w-5xl mx-auto pt-24 pb-16 px-4 sm:px-6 lg:px-8">
        
        <div class="seal-stamp">
            <span>东坡</span>
        </div>

        <!-- 1. 头部和引言 -->
        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">东坡工坊</h1>
            <p class="text-xl md:text-2xl text-gray-700" style="color: #583E2A;">一位工程师的经世才华</p>
        </header>

        <section class="prose prose-lg max-w-3xl mx-auto text-center mb-20 text-lg">
            <p>提起苏东坡，世人多醉心于他“大江东去”的诗词豪情，或“一蓑烟雨”的人生豁达。然拨开风月，我们更惊叹于他作为“工程师”的经世才华。苏轼的仁心，不仅在笔端，更在广阔大地上。</p>
        </section>

        <!-- 方案三: 展厅索引 -->
        <section id="index" class="mb-20">
            <h2 class="text-3xl text-center section-title mx-auto" style="width: 10rem;">展厅索引</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mt-12">
                
                <a href="#yangma" class="exhibit-card reveal-on-scroll stagger-1 group">
                    <div class="h-48 overflow-hidden">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/%E7%8E%8B%E7%A6%8E%E8%BE%B2%E6%9B%B8%EF%BC%8D%E7%A7%A7%E9%A6%AC.png/500px-%E7%8E%8B%E7%A6%8E%E8%BE%B2%E6%9B%B8%EF%BC%8D%E7%A7%A7%E9%A6%AC.png" 
                             alt="[秧马的插图]" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                    </div>
                    <div class="p-5">
                        <h3 class="text-xl font-semibold">巧具 · 秧马</h3>
                        <p class="text-sm text-gray-600 mt-1">一项解放农民的精巧农具。</p>
                    </div>
                </a>

                <a href="#shitan" class="exhibit-card reveal-on-scroll stagger-2 group">
                    <div class="h-48 overflow-hidden bg-gray-700">
                    <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUTExMVFRUXGB0bGBgXGBoYGBgXGBcYGBcXGB0bHiggGB0lGxcfITEhJSkrLi4uGB8zODUtNygtLisBCgoKDg0OGhAQGi0fHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS03N//AABEIAMIBAwMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAEBQIDBgABB//EAEIQAAIBAgQEBAMFBgUDAwUAAAECEQADBBIhMQUiQVEGE2FxMoGRI0KhscEUUmKC0fAHcpKi4RUk8TNTc0ODk7LC/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAECAwQF/8QAJBEAAgIDAQEAAQQDAAAAAAAAAAECEQMhMRJBUQQTYYEiMnH/2gAMAwEAAhEDEQA/ANk4IJ3ie9UFiDpP1ou5UEGu9bgeq5O+kVwf1qQtDvUsoptEIgCYOp9v/NcX2BY/L9amU1968sYaWj8hUllwtltJntFW2uFNpJgfjTLC4dU6a96LyzWTy1wEhYvDF6sxqm7wYEyGPz1px5de+VUfuMdCNuDtpDzHpFAYrBspEn8a1LCKT8TwNy6pzXTZtxqEjNp3c7fKrhksTR8/8S8QcMbNgg3PvMWhLQPVidz/AA6msBxS7bso6C8b199GcEkDYmDr+B+lfQ+O+GsNatvda2VtqCZZmNxyRuZOkk6Dcnevn2E4GnlQc1zFXNFtCVFofv3D6DXt+NWwB8R4ouxlCIn2YQHViEA+7J5ZmaCs4nEsTdW45cMAGznNnc6Aa96uXgtxTaBtlmdnITSGW18QPUEkEU0v8Ga2tlggW+Ga408vwfaFT0GpC+lIdHtrEBc74cXM2RSSzn7IzluW2B0aWiOvN0qtlxRQWi5yAgsAeVSx3JHxRPrG1O+P4mxo9uCt22TlUrGdhyswG0dZ3PtVfC8YGXyL5KQVycuhnmAI2HTUATImgGZbE2biMGl8pblLE6gGJI7TR/Gb1z95SNzkzSR3Y9hsNh2pt4iwV13CvpI5QBHKoMSBsZ6etNMTg/sGt2VtorLBzSXaRvvO2smkIwj5wwLllkSoGoJB0Gp1E770RjLb4cpnYnODnBB0OYgqGOjGO2x+VHcd4Ybdu2+bMuVQuo5XMFx7E6j6UztWTiFGHxO7IXsXIyglgGOmxYHf0mnQzK4mw6FmUsUzcpkkEEAj8xUPLugWyc32mqAk6gmAQPU7VrOHcJa0La4gB7R1IYTkuQQPRhJj0M9DNCtgLnnPcsooSwYQXJ+JicqgDqGbQHaKXkdijG4MqXCOzFPjXmBUiQ2+4BA1HepvZvJbAtvcdLqq9zKCcoBMAmTtuR7U1OBv2L+dh5udWzEmWZdAxE9diK0HDrxSwgsqsxOvUfvHoo6SaVAzEYk3OYIr5EJEtMgHYmDAMCaAwt52bQyToJ2/pWnwdoO7i4fshmcoCQhIjSOvYA0HcsBw925lBdicshWtqBy6HcRGg9O9FA0RtcNuHzGb4co7iGIiVjrpXcBkllYsSGykSesjr6zQeFJd85R7ltADdGdtRszTO8GQB0B9aq4hcRc6WWZlNwlW1+ESdCdT0Py9aKFwbjiSG02HLSEflYTMSSOboRMabxTe/hiMPGYsNDM65tBm06dIpBwyw2S3eVjNwsGE6NlaDPvM1rr1lVSVEW20y+p0mOnr7UUCZ9W8Bt/2GHPN8J31PxNXV3ge4P2GwFJyhSB/K7D9K9oHSEPFsWbdt3AJIGgCl9ToJA1id+wpNwprl3ErfY+WPJCi0QSdYLtMwsOcuuvKaYceLeS8CdRm2HLmBbcgfDOh32pL4ftYgXFL5mIQBhnZVGZoJAac5AB+KNS23XR3Zma6pjvIqvSasTLOnWtBFlsDftTfCYZRzDc0swlkM2pJp4lY5XWi0eraFTXpUlqaQa5yiLLXBKsArjSArdaznG/ESWTkVTcuHZF79JPT21NPsUjMIByjqRv7Dt70txdu3YtllyIf3m7nqTuY7dauC3sGfLPEONxuNujDeWLeRgzBZ5diC5J0jeNNRVHD/MOMuWTFu7lAZwM/mBIOYZupQDedjW08IKrWb8SSbuYlviIYaMe8kH8aS+KcCbd61i1GttgGjqhkfqR/N6V0JE38AMPw9zdt5gouWvvRoyMCHIHVpYSOhps3DFL5o1giWgnUgmBsvw9qbYuzKhl3BlT7/oRXjWTvEn++9MVmbs+H7S2mRVAlviOrZS2aJ9uX5UGMOv7XeGUH7NViNgV1Mxpy6d9fQ1DxbxI22W3nlp5rdsxAI0BbuTGlBWMLe8vOhyeb8KAksTopliZG3f6CpZVVsvv31uk2i+a+RlKwTAAnuANYMkkgetO+BqL1kbrurDsQcrD8N6QeFuEtbxl1GMsLYJPqzKTr1/WtTwax5b31jd84/nUT/uU00iWD8b4VmsOgGmTQbxpy/lS9uHFrNnSHthWX3UAEfMSK1/kFhJqq5gAINMVii5gQykEZgdNex7GqcNhAym3IlWzGTzHcAkdywmdiRpT5bY2NRuWQxBBhhqpH3f67bHQ06KsScRwBLKwJBUMCZiAQI1G2omsdiruUvryTspEAmTMRsYPzNb/il0AZbrKk7mfj/wAo39xuPXesJf4jYttcJzavoVRgIEyRIHfaaiSKixJjeIotwC0jONMucEZ2IGpXcjN06wKjfwLXcV5TOxzsoZ3hmViJKNl5QwiIBjp0oe9dZ7r4lEZrdt1bnjQZxkVo01Pb1rYHCqbV1EPxqbyQuovBgYXY7soBMnQ96SQ2JfDthmtXUZmTDZySw3IAKlQeikCCY9KWcHM4pVTKUBKjN8JSZYjuzDWPWtF+wq628PlJgAGSRLnViY6AknSk/EOCXEurbtnPDFR91Q2UOQNT0Ik6UCLrRNtLllhH27FDpl7ZRG3etrcsZ8qTl0BYiDERIE99vqd6zV22vleYBkXOoy7lWBBb6EVpuB3S4k6OYMRpl6frPrNC6L4fT/CdkJhLKrsAQPbMe2ldVvh5SMPbBEGDtt8RrqhiMrjLSHmuRCHMC2ykfe+W9KuF8UdsRdtMA0N906W1CLEzqcxnWBqGp/ireZWAAYxsdAdIg76Uk4Hwo2WYG6c+YsyCCrKQFRpYFxAWBzdDW7JY3A12ry3cH/Ht1q4rpUU0P9+lUJDHhq6zNNQKW8PgD3NMwtYZOll9sVYoqu3p1q1awor4SqtyekfParK6nQrAbuBzauzMegBKr9F/UmgrnArYVtAzNoJ1CzpyjZY+tOq8YUemgoQWcEtq5dyABfLUfQso/AUNi8KtxGRhKkEHpIP608xlsAMZ1aPw2/v1pWWitoO1YgTD4TJbVN8qgSeoAil/FrlxUK2gDcbRey9Cx9ADP0pzdmgrkk7a+laCbMY/gu0MxdrjvkJLExLnYge87zTXw7w0pbC3ADctjITJII3Ujtofzp6tpj39a9tYVs2x1/SgTbYk4dwwjG3bvQ20Ue+s/gBTy9gdSwHQfQEn9aKw+FMzFGNh9KVgKLad+1TO2tGtZqt8MSIGmtMQtu2o6bzrQAwwYkNPtJH/AI+VaB8M3eaXYnAEnUkjsNB/zVWUuGf4r+y2/hUZuhUspJGxJWNj1r5xxBSWbT7R9FJGkTzHsDrsO/yr6fjbOUaKJmFEDVjt/fpWa4zwpWazZIzawzephjB6HSfpUyQ4vZncXw0JZY2zCFkXLqZ2MnudJn1p9lDXLPmKqqFmVJysMhgjsZA071Y+AnErZJ+6JI2YAEyQNmiJ9detM8TwxYwuaNHII7K9tpB7jMq1KQNiO5w5rd6y408y5HchJn8gR8zTfh+AzRdjZ72kdTcKg/JVIo67hh5wXMDktFgOoJYBZ/GPY0T4aur+yBwJ5rnz+2eI96aAxzHPeNgCB+0E66SMpkCd4bf6Vo+AYduUR8JM/Uz/AH7U0tcNXzVkSVQkn+K4wLEe5Wm2Cw4WRHUn6mf1qWkNSa4abhKxaTXv+Zrqs4dpbUD+9TXtTaFRjOO3ntoptsgm4oYv0UnWBHMTsBIpLhccf2qb1wBTb+zk5VkscqjWGbI0wdfQTWqxeGVipZQ2U5lnoYIkeupqjFWEdcropHZgCJ6GDWtbIJqwjvXiMJiPpXioB6DsK8C9qsAvC3guppsjdaQWrIp3hrgiOorOasaDLZJq5DQ1tquDVg0UXV1Vq1TFIDq8zVzrVefSTQkOwXiTiAKXMKJxCFiSfwrkww3NbpUiGwWJr23hiTvRVyAI0mvUt+1MR1vDdqst4VpqOKAVDzMCRCldWzdIHWh8KWKF2u3VAn7ynlE83w1LYfLGaYX1rja9a94cDkEsXJ1kx1O2gG21EMKVlC+4nWoeVRhtmoxVIYHdt0Pcw80ZdnWqLgPQ0xNCDH4TmzDWNh+tL72BDMhP3CT8yI/Wa0N7MTAFerb2hSaqyTLXOGZgTsxfMCNxGgj2FeY5/secAPbe2zDplFwEsP4SoPtqOlaS9h2P3T/fakPiXDRYLk5ZDKeWSyurKUk/DJg5p0y0MCBwKm5iGEqSqqWWA2i5pB/mFKfCV8Law9nKR5gN2OYgKCTq2xl4IjWCJ7llwziXm4S7f05lLEDdSLKAhv5lJHcEHrRnALA8q2QNFs2lH+jMR+I+lSMJwxm9c7BbY+ucn9KYodaXcNhrl89Q4Ux/Cgj8zTW0npQNMfYD/wBNfn+Zrq8wA+zX5/ma6srGJbrDpQzv3/Cvb7amqGMbVuiWXaVOR0NUG56Govc7f80xBHmAf3/SvVxcbjShT3/WrLaLQxjDD8Q19KLXFr3pYlkVFlAnpUuKYWPUvjoRVn7SvcUgtg9PzouzaMVm4IaYxu4rTTWhcx6n8aiikmrjYAEzTSSAre4F1NDPiS21XnD99amuG7U7JYPatz60Qlo9qnatRRNpKAFvGEhUBEgkj6g6aawddB6etLMBcC+Zm2IIAGg67DMRER3p/wAd0w9x8uYopdRMSyAsonpqI+dIsJbLWxmUIXWYBkRMa9+k9prGTadm8UpKhpwS7BKmBIBA215s0D2A2pzWB4riLpa4LTBGXyTbMTzq11rnuPLUqR61ruFY7zrNq8BAuW1eD0zKGj8acNomemGu1Ds1TLVQ71a0SRy1K1b6nYb16LWhJgAb+1IuN4/4SASiSY2LMQwkgnbXSev1olNJDUWxD448UEMcPZMDZiJlpGwI+76jf2rFLirqr8VwKI0DQANNlBgDrWm4nda+plOZVLIwBGYKRnRgdVMaxJ/Ss2yj6/iK7/0vicf5RjlTizwsTuZ66mfnW48J8Sa8Gt3DmKiQTuVOhB7xpr661g0bKgk9KbeA8c4xYBWQ4KiCJCkySfbKD9a0zxj50iI3YXwfD+Xw++NIy30HfMjXJBM68sEbaKa0Xhu6Gw6MNMwGsa8qhJ/2zSHFFnwuOS0wGW610dQbdy2HIX3BI+Zp74Qui5gbL7wgXaBycsgfL6zXnGzA/BalWxSsXYi7BdmnPuQdhBgiff0rTLiBmybmJOmgHqelJvD1oA4g9TfY/QIP0orCof2kvAUG2oPcczEAxoD6e/ek3Q0anAnkHz/M11dghyDf+ya6pGKsfhwdt6WNhyO9Pby9aBuz2itIsTF/ld5qJtmfh/CjjrXjTvNXZJRkbt+VTtzNSdda4uKAssGY14ZE6ioC59aHe4/alQBtj3FFW2PcUqtue1F2rpH/AJpMaG9hxHQ1475jptNVW7wC1Gzd7d6hoom4NTLHpUHuV4CaBMJtzuanmqoNpXkmgk94us4e6Ovlt/8AqaTLgswJE5wwEjchWusqmekXB9a0ISVg9R+dZzAYgqjMASRbtsPVmOX9KzfTSPBD4kPlCywbKz4pQoOsokh49D//AF60d/h1j+T9nYzlUFPSFTOvtzqf5j2oT/EbCAXOHKNluMPoqf0pT4WutaxVpjyjNlYHQgOttAIPUMUn51LdMrq2fUWFD5xP5V7jMQEUlyFUbkmAPnWdxnHvLDXBAVRJzauR0MTyiR1k+xq5TUekKLYx8T8YFiyQHQXGhQG1+IwdB6d6xPCeIs9y7auyXWAexBk7H0P4CsZc8VXLuIe5dAbN0Ow2jr+PpTFvFAW2zIBmJ5mHc9Z39KiacjbHUR9x++UV7dthnuaR+6AvN6CRHak2CwrOciA3Cog5RJ0Gsx/elFeFuD379q5c2LwAYgBRrGbQLq0kak1uvAfClsYYpMsbj5iD1mIn73f51t+nyPFtGeepGBTwdi+TMsBt9QckndxIOmpgT206azw94dt4NblwnM0E5oiFGuWJPYSfQVq7tmKovWFZSrahtDvsa1llcumJ8z8OYli2KS5aNvPg0YCcwyrayhiRoCwbb0I6VrvCEphrdoiMiqRrurjMD9SRH8NLMNhsrWiQoz4N7cKIH2bAqAOgCnb0o/hF4eRhrg2KKp7bAD/eAP5qgsM4SyoMTOkXnJO+hRG/Kh8DxVnvQom3LA8sGcwSJJ1ykMWPQECKq4Bj1uXcUFaQLixH/wAaqf8Ach+lM8NhQrghtOoOpklmJmdJLdvuipYJGkwQhAP73rqhgfgHz/M17SGeGwarxGH0o4V4wosBX5ArjhaYm2KhcnpVWKgA4IVXcwS9DR5B7VBhTFQse0QanbQxt1o1gOtdTsKFF0kHQa1bhwdzRb2RNR8of2aViLlZY1+dXW7Y6VRbtiveJ8Tt4ayblzNlHRRLE7AKOpJMR61LdFf8LzbqxUrKX+PYm6JULhV35gLl2PUTkT/dQ6XcSCCMbeJ/iSyVPuBbBj2IrF54r6X+3I2gt1NbetKOH8cIAF4Cf30nL/MupT6sPUU6S6CAQQQdoMg/OrU1JaIca6SJAFZRFBwhm55bOy5DIDEW7gPJmESYaJEaitFxLEZLTv8AuqT76aV86N1PPt4YyfMa7l5zMKEtlA0yq5i502GaKTeyknVhniLiKX7uGQOLj2zmkbOji2UuDpqDr6zSbGWpvgagnOAexNnQ/UA0RirwHE3sALKKpYqMoWMjog1JIAJn1NB4u+FdXHQXGMeiGfyrHK6kbQX+IdiuL4m4oe+wnTIqrlGZtsiySTvqSeuwmk/jXEG3hltzzuRn16CNB2AOn170TgDmcYi4SFtLA7ZjpA9gAf5gKzPiDEvirmYKcuy+1ZRTnMr/AFRnsNhmuNlXc7nsOprRvbtLbCDddxOhPdjTO9Zs4XD+WhzXrgl26KuUNlmN9KB4Nw1sRc0MIvxvMbRoNBJgV3Ooq2ZrYXwpcRieRWOQD2tLp0GwM7wO/rW38PWXwi5VuZgWJZWGhkDYj4SCN+s6g6QPhkSymVRlUbAde3zJ/Sr8LdlZkbnY6T1Hy/SuKf6hvhosa+mrwWOS8DGjLGZTuJ29weh9D2NUYh4MUhw+Iy3UYEjMGQ+vKXUn2yn/AFGiMVjBmPvB+tdWKXuNnNOPmVC3i1i55Vp7UBkLrJEgDK8gj1yQOxI9qV+DMQz4Py5LLJysVymGYn1BKvm27Co8f41eGGF3DlcgZmbMpJI8wgQO2uvoaZcLsC1h7QWSoURO+vNrp61qiXwH8OoqHEXkBlyoCLooi2pIA0AhnI+VD/8AUfLdXYqsGSBJJ010/pR3DSRcvoDAzqdT3tJMn8ZpP4m4zabktkHTmcfejZQeompas2x5HFNH0HgXFzcsI4RoM/gxE/hXUB4cvsMNaBdQcuwG0kkD6V1Tsi/4NWGryhw5qWarQi+a4tVOavZp0B61welUZx3qd5JodrR70wJFhXBhVJB71wU7UEtlhtDua9VBURVloa0gRemHFZfxuguvaw4YiQXciRlRdBBHwsS2nsT0rVXsQqIWOgAnWsiLhctcb4nM+oX7q/TX3Jrmz5PKNsUbYJjruTIAPiOX2GVjP4fjVrmGXsZH4Ej8vxoDjF6Hsjux/NB+ponE3YUN0VhMe8N+BP0rz38OsLBNeLddDNtyjTJ0lT7r1PqCD60NhiFBA2nMJM6OZ+kkx8quzetJTceCaT6XcR46z2zbu2yplecHMhXMs6jUGO4HpNYK9YuX+L4ZEYo1tVLFdSpY5nGojZzWl43ilUKGICzmcnpbQEn6nKv81IfA9wl8dxNgQArZJ/eymB69vmK7sDc3bMMiUFSJ8Adr3EcdiDtJAI2JEgfgBQ+PtvlULBZhC9pd8on60R4FUpgrt07uzGfnlBqeFvD9oQMQqWredmJgABYEk6DmYf6TU5HcmOGohfEcIqItoCVUa+pgkk+pMk1lnvy4zDKo6bAcswfU7Vq8elzEgeUMqT8VyQGX0WMxB9YmkWK8MX1cNKus6+WMjAb6IxKnXsetGCaj3pbjYqdmv3oGrXG27bjTsANflW5wVhUUWl+EaserEbk+50+RrP8ACLHlOc3K4XcxyoZ1ESGJGgjv3kUWeJBVc99B/CAP6U883J64KKoJxeMa9cFq3II1nsYEt7BSPm0b0zwdgLlsoSVTVid2JJIB9zJPtSnCDyLYgTfvATG+wCj6b9JzfJ9hLPlqAZZmOsAklusfkK55fhDX5KMVci4vQLzEjuQyAe3NPyNDtjUzM+zF8hO4Jnl9ep9N6hxPElHM6AgLJGoaXP4SKlw7DO9uLdlWGjkm5kh/oZiPzrvwRqBzZHcrBLaZke0Igi4NTpzM23WdfwonCYshFViJ6a9AOvsT+VAkkFuXXRiSdF0U6QPz70HbullykNJGgMhgNQI94rdGYTcuG/iXV5CORojcpdbSwG0kggHYdDV78KRsltVVQpzXD94xGVT339qzuH4k6Z3GpF22RrLAZch9iVYxPY7014vxY2lLkOIVipyEqW6Bj90yZ1gb0ih7wDF+bZz97l0D2W9cUfgK6pf4d8LX/p2HLEyQzf6rjsPwNdUbK0b0mozXM1dVpkk6kDUDXq0AWiuYivKqxFwKJM/KmB66KaqvMqxM6mlrcZjSP16+lRxuOzQNlMa6zvRRLGl+4qiangHVlnWs+MaBKhZPczFFrxQW7LvkMqpIUHcwTA7bflSlpDSsj4jxYZhZG27e37p99vaaXFqGw2JLgu4hyxDgmYYaRI0IiIPUEHrU5mvJzTbns7scUkJuPGb1kdzH++3/AFr27iP+3aPvEt7gnb6xVfiIRct3M0ZFuGO5ISJ+dVF+RR0yE/6XU/kKVXQ2FC+fJDrq1qQR0ZDuPpr/ACmvcNjSy5khgN1LCVI3EnQ/Ol3DMYQ6qoLA8pgScy8sQNzGVo6h6aYXwjnJ8wtbVpi1InLoTmI0VQdtzBjQ1rDC5/DOWRRMzinvcRuC3aRvLnrsYPxEjZZ+vrAFaTxVbXCcOWwkc51jqAQS0f5isDstavhPDbdpQltQqj6nSMzE6liO+wrA+IcWcdxG3at62rTBmI2yJqI/zMT8mHau5Rjjjo5vTnIYthxZwdmx15FI7ndvxmk9vDeabi7Neu7yDltoeUjoSILj1Ipj4hxJF1RMZFLT2Y6J+I/GqPDVpc5OYDKAoXNJn72+uwG8/Ea4Ldejqr4PseZQqpILAiQddiY+dQ4XxFbttW0BMiPUGNPlrQ3FeW5ZbSZj5ErI/AUiwxUXLmHdiqkmCN1ZSNZ9iD7TUKNxKbpmi4vg/NSBGYajsf4TWbxGD81DllXAhgCdhMsBOrdwZHtuHPDuJEMLN4jP91p0fsfnRuIwMtnQ5X/Ax37e4ojJx6JxTBvD3lwWktd+8XYFh/l0EKehA9KYJcDXDGyDv95u3sB+IpFj+EPcYMoCNseYga7lWTUd8pEe1MVseWgtIZZpzEGDH3mPb90epX1qquWhXS2E+J7Ia2l5iApUMffSWE7aQfkaa8Cwyi22Rs2kFoiWGaY9IIoq5hbdyyFdVZR91hmETtB9vwFXYe2tpcq6DUwNdzXpxs8+UlwzDYJc6llzWyJkHLkAnKWmQJ17ddugfErQDIBGcEllAg9BBM6gbdSdDpMU5Z7XmDNh31aFc2ZAzHYxJGukxtG1SxqWlDm9aBUOZZgsKDBkliCF21FJyaNFsxp4bF2+oj7S1bMajV/MQ+0RQXHrf/YXWAiSlyJM5mZdNdNiQfWaf4+9Y/aWPlG7bNq2qixkbUtcYkDMNBoCRtNJONNc8u5h2VET9oVUUxnKvcz5iVYgAFsogfdotlUbzwvZNrC2rUg5AV+asQdtN66iuDYa2tlV8oLGbTKDqWJOsayTM+teVID6vKiTUBfBbL1GtWSTfEKGCmZNei8M0d6hdkc2hAH9xSBsS4OYT30iN9d/SqQjUE9aU8XxjQMux3neoYDjq3GyEQ0bAzSbxPfAuK1uWZSAQGyrGxJ/ejt60Lo2B47EBSHjUECBM6nQCPXvQ+I4ix3gg6ATtPuIoDF4lnuchK5QZIgz6QeomaXYnE3GZz5bFQOYlshU6nQmBt2NVYJGit4kgEgw3Y66z8qOXFs9i4ogOyQAdeYnKJ/m0rMYnGuyg2kzNlBIJUkAjrrHpWj4LadoJO2rESeYjUDsdT7SD2qJyVDjHZ6uC8kM4A8qQGc7tc1z3m9GY5fTIOlEKw71YccmJfybUuqRmyjlUj4ZbYEdBv1A0E+8WwCWrUqCHYhUW2VALHpD8oAAJJ9D7VwZMPva0dUcnnTM/wCKVJS2VA+OGPplLH8VFD3BHkjKSGBUgbnOpED1zEfWqON464uW0bb3DysSoEZdQWBDawdxGgMzWp8PIHuITsiZo/iMKv4ZvrUQxv0ojlNU2G8C4SuFtZ35rkanSdY5F06mB0kx6AF45ii68ztJYTA0iF/y5mVfYmvePOVtZ+iOjtJA5EdWbfSYEx1iOtYvxp40tG2vk5+YEB4K51aMyKrCYMCWgRGncenpLRxK5MZ+OPEgsWmsW2m4R9ow/ED1PXsojfbOcEH7Jh2v3BN27ELoCYHIugn+I/10pZ4Z4c11mxOJjKDKg/vT+OvzJim9y2+JvjWAo0H/ALf8R7tpoO8HUCa4s2T0/Pz6dWKHlAPE8R5iXLr/AHZLBZPNbXVNCDAaTP8Al9aTcb8HYsn9pNohWAbOCOXQQzAMxTTqdB1itq3h3Crbl7fmlYMuxmQIGggSfareFYxjh3wzMWVwLSkyeZzkJUnoQWIGwgd6eGcG6RGRSWzJ8OxeIW15OInPbcZM3xQdMrE76sDPatmOGJdbE5pXmSHUwVYJqVnT70eskGqvEfCrdq4h5Vt7JOypl+H+RhI9HA6UBwPxFcKuVwd65zEZ0yAEnWYdgQNtpG2tXPHTtAp2gjFcGm2ftM4BGUOMsHurKsrPrI9K94Vwu70xHlAT8TG/J6CGVQFnsZ7RUMfjMfck2rGVHClczhLilTPMGkAE6bag1HB2uIur+aLFtnBKaZvL0+E5RrqZ3O29HhfgG2MMJh8YSRdbDqAfitZmZhG4D8qH3ze1NsDgLaElSxYjmctmZonKDOwEnQQNTS44G/oWvW5jpaI1+bH2ovDAogLszHrt9IGlCjGPBem+jgXYIXoSI+Q/qB9ajjr7KItrmc7AmFHqx6D2BNIrniLDjQ55GoCjmkGQR/zSnE+LruSLVpGJzHNcvKh7yyqOXbbMDppW8Ja2c84bsyv+KPEbqMlpsSzXCJdLfJatr0EAyzE6yx2G2tZh8a19Ut2r11ruI5b1t4CFgwNvKSYK+8ER2qy9gGu37T33QG++Z+YIq2xqSzRCcvaY666Vdwh8F5z2r5Zrc5bF1JGTnLTmMHQkCSIiSQBRJo0jGizxFYa1inOJtZTcSeU5oYIFV0bqA6iQenypbhHsqoYw1zzAWVgGlYJJkiddAR+dO/EfERfsFCfNa1cVUvBkPmArqIUz94agEHL02pLxJhae0QLcG0JgNpmUqQ2YkFgdZECfapLR9h8K8XsthbbeUF+LRSYEOwMc69uwrqV+HMA4w9vzEvB9SYSd2JGs9iK6pHR9JdwJk0F+22RJkTsf6TQeMRtZOnvSfE3Ug/aKpO01rwzqx9/1pAoEaTET0jes9i+Nq2YKrKJI16iRJFAX7pcsFIA0yOSSCYBOnuahiMGDlII6yIMEkadRp1poVHJisubmO5gTuDB2FUNiwcjZoznYyCZ20qOO4ezaB0WIIIU7dRGbf1oC5whyRN0tECMgIiZzan4vWiyqQMcXmv5gqr8VtpcBgQDGx2On40Vicfct3QAUbKEJVgGUMAG0kevxCKDucDaW113VoUa7iQBtr71oPD160hP7QFYmFkEr/lA1+LfffTaolFtdKg1F21Z3DeJXMS/k3NWgslwAKbbAT0iVYAggaxPuHmBxVhVVLwfMJBW4ZBI35UhXGu5XWgcRbs27ma0RkMkzoZX7p+QKztrXWrJCJ+yXUZFABDa57cHIQejRymRrk1iKz8OK7ZftSd1RoMJxm18FtSADsLZRQfchVqPEc9xSYBCkMAAZESHObYnKTAA6bmqcFjgAMyBCR8MrPWY1hh7Se4FMbfEkmA4kawTDfQ61DX5Ha+GWxtsOIB5h8JGvTb1nt6D0pZhr90MFt3jYbUHRTmEg5QzK2XbQ5SRJ0rS8V4OTL2i0TMASVPWBuw9AZGwkQBnLlguhdrtoCSBcGmu0MDAn0OtYeJY3aL9KRRxjDsXU3b10ncebNxCRHw5SUB9Mq+xpXgsGty8WcXMQ87KmVBGwZ2yqo9B9KeW8CgADtef+EK1u23t3/wBUUeuNVIQJkA2XNaUAeg8wQNK0nObVJEKMV9IjhbuQblzIAIFu3GVR6EiS38WmhIAGpLHDWFQZVED5kk9zOpPqaB/6kNTKD1a9bG/TRmpTxTxKqD483cWQWMf/ACMAo+hNczxZJao29xQdxPEm43lIQAurtMAR3PQDv3iKD4Bc87F2vK5rFk5i8aOygiR6E7f5KQ2ExOKUyiWMKCJzMVUmdi5M3GPoCe0TNfReCYa3btrbVhbTcmcrHuV7dp6DbX4e3Dg87ZzZclqkKf8AEm15uH8wkZLbADNtmJlm7wAuXTeWHQV89tYvFWWZDicRIfLlRsw1MgLnaBptPcV9J/xCxVk4PyVYEFlGVIJCrOaB2EV87xtvzgHtE6EDUw2ZFC8xO0gT9K2mRj4aPw5xTFX7iA422uZM2TIbjQQIJLW1AM/xd4rT3reJVG8zFWVESW8kLoPinNcIiNK+W3uFEXHRUCqckR0YloE9RIX3o2+uS0hdSz2y0AgEc4B0jYyDHv71mXRrLnFL+QsrX8RqdbFnKvplNwagAfdJ60Zw5HuoLovuEI+FhlZf4WE8pFZbCYDE4qEuXBYtEExZAzHrDuN/asnwrE21W4l53FkaG3aaDcdm+OCYIAQSfbvToR9bvYSwg5p165SfWdF/Gpm9ZNpltssD4gDB7wZ112k96wPBcYbd9Gs+elkqVQYhmSyr5gQqsxIdSARB1k6RpVviriK3HzKT5wYLmz6IBqcmkBZ1zHt9CmAVduYa/ifMuJcxrqulmyjC2hn5EgADfc1lMfxC2Ma1xLRtBZK2yBCXgIDZdFENBiPu0bwYquIa2bwUMrTcs3M8kawjKdzEAnr70j4rkYN5SgLbMambjZmJzMfvEbTp001qkB1gl7y3bhzZn54ABMQeggT7dDTXilwtibQdVCosqqQdC7NB13k9ewpbgbl+63kCAXM83LMbgECRtRWD4dce+1u2mQqACdhb6ySDzajTvQCo+pcF8R3jZUzl1bTLsM7R36V1ZjgNgLYVQSYLanckuxP415UF0fVcfhixkH618y4liDnKkAwxAjlMTH9mvqlxhSLinDEMtkk/30+daSj6HgyrG9qzPcH/APTErlIkQe06ToKYKU0mAaGxForsuntVNzEQI0qlpGcn6djUOsaxNDYnEKBovvS3zTvXjE+posVFFzGvnUZTBn+UaxSs3JGUoVb4o3M5jrIHzp3ljT8PzNQaxJIIFIaFKY+4S4hh0BVC0E6KYnWD12pfguL3VUuwuq6cruISATEaak/0mtO9kCIOvpUWsMdz+oj1mgDPHxBiHto3lzDnnLOyQu+cSeh6/KiR4uYvka0ChGhALDaZkkE9qLv4PzJW4FMNmWJUR93MOvUTVWF4R5awqjedSSJjYSaQWMMB4qES1q2RE5tVgfDLZd43I6+9bfBYF25wAh/9y4ua8Qf3V+GwOw19RNfOrGHKOS1uZ3WTlPrp+lP8P4xvKJcCe2rabb6TtuaFRMk/g84hwEAZi7sWYDM7EKs7s2WBA7aSSNRvQ2M8IIEtw1xzn+0uaMwQ5jKqBB1yr1gEnWKGPjW7pltKQes6D31qlvGDTlGHthjMbanr1FV6RPljpPC2C2i4066vc/IVnvFNpMM2WxhUCBMxukeYw1kjmzFIGuaOnzFJ8V3mblRAFMPKQJ66sTr1pbxS699gLjm4Acwt6JbIEmGCBQ1P0gp3sTX8dc+JpY5hKnsZg5jJHygV7iMQ2UsqhXOUxI2nWDMmY3q65hyWLE5RIlTlI3GhmNdauxPDsyzyMBsSNtPSJ06VP9l0KMTiuZyogqBznn5TH2YJb97r1iqsBjSguA8oDI2s7EgGPcCPnXPw+0CGDFY006wd/Tam68OcEkKMjCGOQHYEyCdtYqXspMLvX2uOqpkBKDmu6AEFXUjuwIOn8VZnxEgW8U/afOuAwzLy21I0hdTMTuIFMMWUtlrhZrkAFFG6mIYsdIHXX0pBxziNzFOMQbYS2kKoA5dNcuwDEnf/AIoigZoOD8JNy8bBvZrp+EtnyrpDsqEAF41BI6DakXEcOjXriWUVcrjIQT9xcp3/AHiAff3q4cSxb3xfLfauARl5YBXlAjYZenTShMZfa3cOZQrg/cYQD9NRTCjSYTjamyivaZiikEEwGck5sxP5AUr4jbviMWyWRbzZcpAKSB8JTZtPrrSu3xaNgwJYFjyx2ovF2/OtNdzwoYKoY87Ak82UaAaGSdKKF5QDjOJ3LhmESdhaRbYE/wCUeu3rRfELYS3bS06tng3IIguhkDuAMwGvWaXYpVX/ANOZU6nprt89N6twnDySnlvqwPpDKAzAzrABiY1IooA/C8Sa4qW8iLctkkMSVjUEHSZMiO0Gtn4fZLiM8ZGfmPTUSOXeQCI7VjsBw+75rSXW9bBJEiSInlkQdOnpW/4ZYygoVXLmJDKCNTqSF+7qehjfakwIcEwH2K5ywaWMAGILsR07RXVreH3ItqJHX8zXtTRVj/r9aCxQ1+f6Gurq1MillHahLlpSdVB+Qrq6hgBYmysfCPoKHyCdhXV1SUWBRJ0FSZB2HTpXldQAHbtjXQb9qJKjKP76V1dVIZRZtjOdBsOlFi0vYb9vSurqQFDoIOg/sUNhkGQaD+ya6uoRMuFt+yoT4R9B6Ul4GoN3UA6dflXV1MlcGZtKYlQZInQUdg8MkRkWNeg711dQumbKOK4K2FY+WkkieUd/avMNh0yRlX4V6D+KurqYyjG4S3A5E6/dHemljB22WGtoRl2Kg9PaurqTIfRVxLhGHLuDYswFUgeWsAwuo00o/GcKsGxaU2LWUSQMiwDkbWIrq6hD+FFrg2GCLGHsjmH/ANNO3tVL8EwxGuHsn/7ad/aurqBx6zxPD+E1/wC1w/8A+JP6U34fwbDLbuBcPZAKGQLaCQWWeldXVP0omvAcL5Vsfs1jR5H2SaHuNN6u4bwPChyRhrAkiYtIJ+LfT1P1rq6mA2PDLBvBzZtZ5YZsi5ohdJiaJTAWuX7K3t+6v9K6uqWaLhauFtgaIv8ApFdXV1Io/9k="
                        alt="[石炭的意象图]" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                    </div>
                    <div class="p-5">
                        <h3 class="text-xl font-semibold">灼见 · 石炭</h3>
                        <p class="text-sm text-gray-600 mt-1">一场超越时代的能源革命。</p>
                    </div>
                </a>

                <a href="#sudi" class="exhibit-card reveal-on-scroll stagger-3 group">
                    <div class="h-48 overflow-hidden">
                        <img src="http://hznews.hangzhou.com.cn/wghz/images/2019-03/15/288de6a7-9988-4af8-a12d-2dd4eaec2186.jpg" 
                             alt="[苏堤的风景图]" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                    </div>
                    <div class="p-5">
                        <h3 class="text-xl font-semibold">宏图 · 苏堤</h3>
                        <p class="text-sm text-gray-600 mt-1">一套系统性的城市水利工程。</p>
                    </div>
                </a>

            </div>
        </section>

        <!-- 方案七: “东坡足迹” 工程师生涯时间轴 -->
        <section id="timeline" class="my-20 py-16 reveal-on-scroll">
            <h2 class="text-3xl text-center section-title mx-auto" style="width: 14rem;">东坡足迹</h2>
            
            <div class="timeline-container">
                <div class="timeline-line"></div>
                
                <div class="timeline-item reveal-on-scroll stagger-1">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h4 class="font-bold">1037年</h4>
                        <p>眉山出生</p>
                    </div>
                </div>
                
                <div class="timeline-item reveal-on-scroll stagger-2">
                    <div class="timeline-dot highlight"></div>
                    <div class="timeline-content">
                        <h4 class="font-bold">1078年</h4>
                        <p>知徐州<br>灼见·石炭</p>
                    </div>
                </div>

                <div class="timeline-item reveal-on-scroll stagger-3">
                    <div class="timeline-dot highlight"></div>
                    <div class="timeline-content">
                        <h4 class="font-bold">1080年</h4>
                        <p>贬谪黄州<br>巧具·秧马</p>
                    </div>
                </div>

                <div class="timeline-item reveal-on-scroll stagger-4">
                    <div class="timeline-dot highlight"></div>
                    <div class="timeline-content">
                        <h4 class="font-bold">1089年</h4>
                        <p>知杭州<br>宏图·苏堤</p>
                    </div>
                </div>

                <div class="timeline-item reveal-on-scroll stagger-5">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h4 class="font-bold">1101年</h4>
                        <p>常州逝世</p>
                    </div>
                </div>
            </div>
        </section>


        <!-- 展厅内容区域 -->
        <main class="space-y-16">

            <!-- 展区一：《秧马》 -->
            <section id="yangma" class="exhibit-card reveal-on-scroll">
                <div class="md:flex items-center">
                    
                    <div class="md:w-1/2 p-6 yangma-img-container">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/%E7%8E%8B%E7%A6%8E%E8%BE%B2%E6%9B%B8%EF%BC%8D%E7%A7%A7%E9%A6%AC.png/500px-%E7%8E%8B%E7%A6%8E%E8%BE%B2%E6%9B%B8%EF%BC%8D%E7%A7%A7%E9%A6%AC.png"
                        alt="[秧马的复原图或古画]" 
                             class="w-full h-auto rounded-lg shadow-md object-cover"
                             onerror="this.src='https://placehold.co/600x400/f0e8d8/583E2A?text=图像加载失败'; this.alt='秧马复原图加载失败'">
                        

                        <div class="hotspot" style="top: 68%; left: 45%;" 
                             data-title="骑坐部 (座位)" 
                             data-text="农民可骑坐其上，双腿蹬地倒退，双手则被解放出来，极大提高了插秧效率。">
                            <span class="hotspot-label">骑坐部</span>
                        </div>
                        
                        <div class="hotspot" style="top: 75%; left: 50%;" 
                             data-title="底板 (滑板)" 
                             data-text="秧马底部的竹木滑板，使其在水田烂泥中滑行而不下陷，即苏轼所言“泥行不污”。">
                            <span class="hotspot-label">底板</span>
                        </div>
                        
                        <button id="open-3d-modal" title="查看 3D 模型">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7l8 4" />
                            </svg>
                        </button>

                        <p class="text-center text-sm text-gray-600 mt-2">（《王祯农书》中的秧马插图）</p>
                    </div>

                    <div class="md:w-1/2 p-8 md:p-10">
                        <h2 class="text-3xl section-title reveal-on-scroll">巧具 · 《秧马》</h2>
                        <div class="prose prose-lg mt-4 text-gray-800 space-y-4 reveal-on-scroll stagger-1">
                            <p>“秧马”是一种半自动化的插秧工具。苏轼在贬谪黄州期间，深感农民“身如弩，足如矢”弯腰插秧之苦，遂推广了这种农具。</p>
                            <p>它结构简单，以竹木制成，状如小马。农民可骑坐其上，用脚蹬地，在水田里倒退移动，双手则解放出来快速插秧。这不仅极大提高了效率，更将农民从日复一日的“弯腰”劳作中解放出来。</p>
                            
                            <!-- (修改) 方案八: 增加 clickable-note 类 -->
                            <div class="curator-note reveal-on-scroll stagger-2 clickable-note">
                                <span class="note-title">策展人笔记：</span>
                                <p>苏轼为此专门创作了《秧马歌》，感叹其“泥行不污，足不蹋地”，极大地减轻了农民的劳苦。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 展区二：《石炭》 -->
            <section id="shitan" class="exhibit-card reveal-on-scroll">
                <div class="flex flex-col">
                    <div class="p-8 md:p-10">
                        <h2 class="text-3xl section-title reveal-on-scroll">灼见 · 《石炭》</h2>
                        <div class="prose prose-lg mt-4 text-gray-800 reveal-on-scroll stagger-1">
                            <p>苏轼在徐州任知州时，当地饱受洪水与燃料短缺之苦。他敏锐地发现了“石炭”（煤）的巨大潜力，并写下了堪称“能源转型报告”的《石炭》诗。</p>

                            <button id="shitan-toggle" class="text-sm font-semibold mt-4" style="color: #a84343;">
                                展开阅读 <span class="arrow">&darr;</span>
                            </button>
                            
                            <div id="shitan-details" class="collapsible-content space-y-4">
                                <p>他不仅是“发现者”，更是“流程优化者”。他分析了旧法炼铁“薪炭贵”的痛点，推动了以煤代薪的燃料革命。同时，他还优化了开采和冶炼流程，解决了运输和燃烧效率问题。</p>

                                <!-- (修改) 方案八: 增加 clickable-note 类 -->
                                <div class="curator-note clickable-note">
                                    <span class="note-title">东坡曰：</span>
                                    <p>“投泥泼水愈光明，客囊丰实薪炭轻。”<br>—《石炭》诗节选。苏轼已然洞悉了煤炭作为高效能源的巨大价值。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="w-full p-6 md:p-10" style="background-color: #fdfaf5;">
                        <h3 class="text-xl font-semibold text-center mb-6 reveal-on-scroll">苏轼的能源流程优化</h3>
                        <div class="flow-chart">
                            <div class="flow-box reveal-on-scroll stagger-1">
                                <h4 class="font-bold text-lg">痛点：旧法炼铁</h4>
                                <p class="text-sm">薪炭昂贵，山林耗竭</p>
                            </div>
                            <div class="flow-arrow hidden md:block reveal-on-scroll stagger-2">→</div>
                            <div class="flow-arrow block md:hidden reveal-on-scroll stagger-2">↓</div>
                            <div class="flow-box reveal-on-scroll stagger-3">
                                <h4 class="font-bold text-lg">苏轼洞察：石炭</h4>
                                <p class="text-sm">发现并推广煤炭</p>
                            </div>
                            <div class="flow-arrow hidden md:block reveal-on-scroll stagger-4">→</div>
                            <div class="flow-arrow block md:hidden reveal-on-scroll stagger-4">↓</div>
                            <div class="flow-box reveal-on-scroll stagger-5">
                                <h4 class="font-bold text-lg">流程重构：新法</h4>
                                <p class="text-sm">以煤代薪，优化开采</p>
                            </div>
                            <div class="flow-arrow hidden md:block reveal-on-scroll stagger-6">→</div>
                            <div class="flow-arrow block md:hidden reveal-on-scroll stagger-6">↓</div>
                            <div class="flow-box reveal-on-scroll stagger-7">
                                <h4 class="font-bold text-lg">成果：高效经济</h4>
                                <p class="text-sm">能源转型，民生改善</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 展区三：《苏堤》 -->
            <section id="sudi" class="exhibit-card reveal-on-scroll">
                <div class="md:flex items-center">
                    <div class="md:w-1/2 p-8 md:p-10">
                        <h2 class="text-3xl section-title reveal-on-scroll">宏图 · 苏堤</h2>
                        <div class="prose prose-lg mt-4 text-gray-800 space-y-4">
                            <p class="reveal-on-scroll stagger-1">苏堤，不仅是“西湖十景”之首，更是一项卓越的“城市自动化”水利系统工程。</p>
                            <p class="reveal-on-scroll stagger-2">苏轼治理杭州，面对的是西湖淤塞、水系不畅的难题。他并非简单清淤，而是构建了一个系统：</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li class="reveal-on-scroll stagger-3"><strong>系统闭环：</strong> 挖出的淤泥筑成苏堤，既是交通要道，又是水流分割线。</li>
                                <li class="reveal-on-scroll stagger-4"><strong>自动调蓄：</strong> 堤上设六桥，利用钱塘江潮汐与西湖的水位差，实现自动冲淤和灌溉。</li>
                                <li class="reveal-on-scroll stagger-5"><strong>生态工程：</strong> 在湖中种植菱角，既净化水质，又增加百姓收入。</li>
                            </ul>
                            
                            <!-- (修改) 方案八: 增加 clickable-note 类 -->
                            <div class="curator-note reveal-on-scroll stagger-7 clickable-note">
                                <span class="note-title">策展人笔记：</span>
                                <p>苏堤工程的精妙之处在于其“系统性”。它不是一次性的清淤，而是一个集交通、水利、生态、经济于一体的可持续解决方案。</p>
                            </div>
                        </div>
                    </div>
                    <div class="md:w-1/2 p-6 sudi-img-container reveal-on-scroll" style="background-color: #f4f8fa;">
                        <img src="http://hznews.hangzhou.com.cn/wghz/images/2019-03/15/288de6a7-9988-4af8-a12d-2dd4eaec2186.jpg" 
                             alt="[苏堤水利系统示意图]" 
                             class="w-full h-auto rounded-lg shadow-md object-cover"
                             onerror="this.src='https://placehold.co/600x450/d8e8f0/3a5a78?text=图像加载失败'; this.alt='苏堤示意图加载失败'">
                        <p class="text-center text-sm text-gray-600 mt-2">（苏堤六桥，实现了西湖的自动调蓄）</p>
                    </div>
                </div>
            </section>

        </main>

        <!-- 页脚 -->
        <footer class="text-center mt-12 py-8">
            <p class="text-lg" style="color: #583E2A;">观 止</p>
            <p class="text-sm text-gray-500 mt-1">东坡工坊 · 数字展厅</p>
        </footer>

    </div>

    <!-- 3D 模型浮窗 -->
    <div id="modal-3d" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-70 hidden backdrop-blur-sm transition-opacity duration-300">
        <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full overflow-hidden transform transition-all duration-300 scale-95 opacity-0" 
             style="background-color: #f9f6f0;"
             id="modal-3d-content">
            <div class="flex justify-between items-center p-4 border-b" style="border-color: #e0d8cc;">
                <h3 class="text-xl font-bold" style="color: #583E2A;">秧马 3D模型</h3>
                <button id="close-3d-modal" class="text-gray-500 hover:text-black">&times;</button>
            </div>
            <div class="p-6">
                <div id="yangma-3d-canvas" class="w-full h-96 rounded-md overflow-hidden" style="background-color: #f9f6f0; cursor: move;"></div>
                <p class="text-center text-sm text-gray-600 mt-2">（请拖动鼠标以360°查看秧马模型）</p>
            </div>
        </div>
    </div>

    <!-- (新增) 方案八: "展品铭牌" 聚焦弹窗 -->
    <div id="modal-note" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-70 hidden backdrop-blur-sm transition-opacity duration-300">
        <div class="bg-white rounded-lg shadow-2xl max-w-lg w-full overflow-hidden transform transition-all duration-300 scale-95 opacity-0" 
             style="background-color: #fcfaf2; background-image: url('https://www.transparenttextures.com/patterns/rice-paper.png');"
             id="modal-note-content">
            
            <!-- (修改) 调整关闭按钮位置，使其更像铭牌 -->
            <div class="flex justify-end p-2 pb-0">
                <button id="close-note-modal" class="text-gray-500 hover:text-black">&times;</button>
            </div>
            
            <!-- (修改) 调整padding，优化阅读体验 -->
            <div class="p-8 pt-0 prose prose-lg max-w-none" id="note-modal-body" style="color: #3a2e2e;">
                <!-- Content will be injected by JS -->
            </div>
        </div>
    </div>

    <!-- JavaScript 区域 -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. 滚动渐入效果 ---
            const revealElements = document.querySelectorAll('.reveal-on-scroll');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, {
                threshold: 0.1 
            });
            revealElements.forEach(el => {
                observer.observe(el);
            });

            // --- 2. 背景音乐控制 ---
            try {
                let isPlaying = false;
                const musicToggle = document.getElementById('music-toggle');
                const iconMuted = document.getElementById('icon-muted');
                const iconPlaying = document.getElementById('icon-playing');

                const reverb = new Tone.Reverb(3).toDestination(); 
                const synth = new Tone.PolySynth(Tone.Synth, {
                    oscillator: { type: "fatsawtooth" },
                    envelope: { attack: 0.01, decay: 0.1, sustain: 0.2, release: 0.4 },
                    volume: -18 
                }).connect(reverb);

                const melody = new Tone.Sequence((time, note) => {
                    synth.triggerAttackRelease(note, "8n", time);
                }, ["C4", "E4", "G4", "A4", "G4", "E4", "C4", ["D4", "G4"], "E4", "C4", "D4", "G4", "E4", "D4", "C4", null], "4n");
                
                Tone.Transport.bpm.value = 75; 
                
                musicToggle.addEventListener('click', async () => {
                    await Tone.start(); 
                    if (isPlaying) {
                        Tone.Transport.stop();
                        melody.stop();
                        isPlaying = false;
                        iconMuted.classList.remove('hidden');
                        iconPlaying.classList.add('hidden');
                    } else {
                        Tone.Transport.start();
                        melody.start(0);
                        isPlaying = true;
                        iconMuted.classList.add('hidden');
                        iconPlaying.classList.remove('hidden');
                    }
                });
            } catch (e) {
                console.error("Tone.js (背景音乐) 初始化失败:", e);
                const musicToggle = document.getElementById('music-toggle');
                if(musicToggle) musicToggle.style.display = 'none'; 
            }

            // --- 3. 3D模型浮窗逻辑 ---
            let is3DInitialized = false;
            let animationFrameId = null;
            let controls3D = null; 
            let renderer3D = null;
            let scene3D = null;
            let camera3D = null;
            const modal = document.getElementById('modal-3d');
            const modalContent = document.getElementById('modal-3d-content');
            const openBtn = document.getElementById('open-3d-modal');
            const closeBtn = document.getElementById('close-3d-modal');

            function initYangma3D() {
                if (is3DInitialized) return; 
                try {
                    const container = document.getElementById('yangma-3d-canvas');
                    if (!container || typeof THREE === 'undefined' || typeof THREE.OrbitControls === 'undefined') {
                        console.error("Three.js 或容器 #yangma-3d-canvas 未找到。");
                        return;
                    }
                    scene3D = new THREE.Scene();
                    scene3D.background = new THREE.Color(0xf9f6f0); 
                    camera3D = new THREE.PerspectiveCamera(50, container.clientWidth / container.clientHeight, 0.1, 1000);
                    camera3D.position.set(3, 2, 5);
                    renderer3D = new THREE.WebGLRenderer({ antialias: true });
                    renderer3D.setSize(container.clientWidth, container.clientHeight);
                    renderer3D.setPixelRatio(window.devicePixelRatio);
                    container.appendChild(renderer3D.domElement);
                    controls3D = new THREE.OrbitControls(camera3D, renderer3D.domElement);
                    controls3D.enableDamping = true; 
                    controls3D.dampingFactor = 0.05;
                    controls3D.autoRotate = true; 
                    controls3D.autoRotateSpeed = 0.5;
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
                    scene3D.add(ambientLight);
                    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
                    directionalLight.position.set(5, 10, 7.5);
                    scene3D.add(directionalLight);
                    const material = new THREE.MeshLambertMaterial({ color: 0x8B4513 }); 
                    const yangmaGroup = new THREE.Group();
                    const seat = new THREE.Mesh(new THREE.BoxGeometry(4, 0.3, 1.5), material);
                    yangmaGroup.add(seat);
                    const skidMaterial = new THREE.MeshLambertMaterial({ color: 0x7a3d10 });
                    const skidShape = new THREE.Shape();
                    skidShape.moveTo(-2.5, -0.2);
                    skidShape.lineTo(2, -0.2);
                    skidShape.quadraticCurveTo(2.5, -0.2, 2.5, 0.2); 
                    skidShape.lineTo(2.5, 0.2);
                    skidShape.lineTo(-2.5, 0.2);
                    skidShape.lineTo(-2.5, -0.2);
                    const extrudeSettings = { depth: 0.2, bevelEnabled: true, bevelThickness: 0.05, bevelSize: 0.05, bevelSegments: 2 };
                    const skidGeometry = new THREE.ExtrudeGeometry(skidShape, extrudeSettings);
                    const skidLeft = new THREE.Mesh(skidGeometry, skidMaterial);
                    skidLeft.position.set(0, -0.3, 0.6);
                    yangmaGroup.add(skidLeft);
                    const skidRight = new THREE.Mesh(skidGeometry, skidMaterial);
                    skidRight.position.set(0, -0.3, -0.8); 
                    yangmaGroup.add(skidRight);
                    const handleBase = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.1, 0.8, 8), material);
                    handleBase.position.set(1.5, 0.55, 0);
                    yangmaGroup.add(handleBase);
                    const handleBar = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.1, 1, 8), material);
                    handleBar.position.set(1.5, 0.9, 0);
                    handleBar.rotation.z = Math.PI / 2;
                    yangmaGroup.add(handleBar);
                    scene3D.add(yangmaGroup);
                    controls3D.target.set(0, 0.2, 0); 
                    function animate() {
                        animationFrameId = requestAnimationFrame(animate);
                        controls3D.update(); 
                        renderer3D.render(scene3D, camera3D);
                    }
                    animate();
                    window.addEventListener('resize', () => {
                        if (renderer3D && camera3D && container) {
                            camera3D.aspect = container.clientWidth / container.clientHeight;
                            camera3D.updateProjectionMatrix();
                            renderer3D.setSize(container.clientWidth, container.clientHeight);
                        }
                    });
                    is3DInitialized = true;
                } catch (e) {
                    console.error("Three.js (3D模型) 初始化失败:", e);
                    const canvasContainer = document.getElementById('yangma-3d-canvas');
                    if(canvasContainer) canvasContainer.innerHTML = "<p class='text-center text-red-600 p-10'>3D模型加载失败，请刷新页面重试。</p>";
                }
            }

            if (modal && openBtn && closeBtn && modalContent) {
                openBtn.addEventListener('click', () => {
                    modal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden'; 
                    setTimeout(() => {
                        modal.style.opacity = "1";
                        modalContent.style.opacity = "1";
                        modalContent.style.transform = "scale(1)";
                    }, 10); 
                    initYangma3D(); 
                    if (controls3D) controls3D.autoRotate = true; 
                    if (animationFrameId === null && is3DInitialized) {
                        function animate() {
                            animationFrameId = requestAnimationFrame(animate);
                            controls3D.update(); 
                            renderer3D.render(scene3D, camera3D);
                        }
                        animate();
                    }
                });
                const closeModal = () => {
                    modal.style.opacity = "0";
                    modalContent.style.opacity = "0";
                    modalContent.style.transform = "scale(0.95)";
                    setTimeout(() => {
                        modal.classList.add('hidden');
                        document.body.style.overflow = ''; 
                    }, 300); 
                    if (controls3D) controls3D.autoRotate = false; 
                };
                closeBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal();
                });
            }
            
            // --- 4. 石炭内容展开JS ---
            const shitanToggle = document.getElementById('shitan-toggle');
            const shitanDetails = document.getElementById('shitan-details');
            if (shitanToggle && shitanDetails) {
                shitanToggle.addEventListener('click', () => {
                    const isExpanded = shitanDetails.classList.toggle('expanded');
                    const arrow = shitanToggle.querySelector('.arrow');
                    if (isExpanded) {
                        shitanToggle.innerHTML = '收起阅读 <span class="arrow">&uarr;</span>';
                    } else {
                        shitanToggle.innerHTML = '展开阅读 <span class="arrow">&darr;</span>';
                    }
                });
            }

            // --- (修改) 5. 方案八: "展品铭牌" 弹窗JS (已集成方案二) ---
            const noteModal = document.getElementById('modal-note');
            const noteModalContent = document.getElementById('modal-note-content');
            const closeNoteBtn = document.getElementById('close-note-modal');
            const noteModalBody = document.getElementById('note-modal-body');

            if (noteModal && noteModalContent && closeNoteBtn && noteModalBody) {

                // 步骤 1: (重构) 将打开和关闭逻辑提取为可重用函数

                // 关闭弹窗的函数 (来自你的原代码)
                const closeNoteModal = () => {
                    noteModal.style.opacity = "0";
                    noteModalContent.style.opacity = "0";
                    noteModalContent.style.transform = "scale(0.95)";
                    
                    setTimeout(() => {
                        noteModal.classList.add('hidden');
                        document.body.style.overflow = ''; 
                    }, 300);
                };

                // (新增) 打开弹窗的函数
                const openNoteModalWithContent = (htmlContent) => {
                    // 1. 将内容填充到弹窗中
                    noteModalBody.innerHTML = htmlContent;
                    
                    // 2. 显示弹窗
                    noteModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden'; 
                    
                    setTimeout(() => {
                        noteModal.style.opacity = "1";
                        noteModalContent.style.opacity = "1";
                        noteModalContent.style.transform = "scale(1)";
                    }, 10);
                };

                // 绑定关闭事件 (来自你的原代码)
                closeNoteBtn.addEventListener('click', closeNoteModal);
                noteModal.addEventListener('click', (e) => {
                    if (e.target === noteModal) {
                        closeNoteModal();
                    }
                });

                // 步骤 2: (修改) 更新 .clickable-note 监听器 (使用新函数)
                const clickableNotes = document.querySelectorAll('.clickable-note');
                if (clickableNotes.length > 0) {
                    clickableNotes.forEach(note => {
                        note.addEventListener('click', () => {
                            // 1. 从被点击的笔记中获取内容
                            const content = note.innerHTML;
                            // 2. 使用新函数打开弹窗
                            openNoteModalWithContent(content);
                        });
                    });
                }

                // 步骤 3: (新增) 为新热点 .hotspot 添加监听器
                const hotspots = document.querySelectorAll('.hotspot');
                if (hotspots.length > 0) {
                    hotspots.forEach(hotspot => {
                        hotspot.addEventListener('click', (e) => {
                            e.stopPropagation(); // 防止冒泡触发其他事件
                            
                            // 1. 从 data 属性获取内容
                            const title = hotspot.dataset.title || '详情';
                            const text = hotspot.dataset.text || '暂无详细信息。';
                            
                            // 2. 格式化为弹窗所需的 HTML
                            const htmlContent = `<span class="note-title">${title}</span><p>${text}</p>`;
                            
                            // 3. 使用新函数打开弹窗
                            openNoteModalWithContent(htmlContent);
                        });
                    });
                }
            }

        });
    </script>

</body>
</html>